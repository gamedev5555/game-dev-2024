<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Piano</title>
    <style>
        body {
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        .piano {
            display: flex;
            position: relative;
            border: 1px solid #222;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .key {
            display: inline-block;
            position: relative;
            border: 1px solid #000;
            transition: background 0.1s ease, transform 0.1s ease; /* Added transform for visual feedback */
        }

        .white {
            width: 40px;
            height: 200px;
            background: white;
            z-index: 1;
        }

        .black {
            width: 30px;
            height: 120px;
            background: black;
            position: absolute;
            left: 30px;
            margin-left: -15px;
            z-index: 2;
        }

        .white:hover, .black:hover {
            background: lightgrey;
        }

        .active {
            background: yellow;
            transform: scale(0.95); /* Shrink slightly when active */
        }

        .white:nth-child(2) .black { left: 30px; }
        .white:nth-child(4) .black { left: 30px; }
        .white:nth-child(6) .black { left: 30px; }
        .white:nth-child(8) .black { left: 30px; }
        .white:nth-child(10) .black { left: 30px; }
    </style>
</head>
<body>
    <div class="piano">
        <div class="key white" data-note="C"></div>
        <div class="key black" data-note="C#"></div>
        <div class="key white" data-note="D"></div>
        <div class="key black" data-note="D#"></div>
        <div class="key white" data-note="E"></div>
        <div class="key white" data-note="F"></div>
        <div class="key black" data-note="F#"></div>
        <div class="key white" data-note="G"></div>
        <div class="key black" data-note="G#"></div>
        <div class="key white" data-note="A"></div>
        <div class="key black" data-note="A#"></div>
        <div class="key white" data-note="B"></div>
        <div class="key white" data-note="C2"></div>
    </div>

    <script>
        const keys = document.querySelectorAll('.key');

        // Function to play sound, with error handling
        function playSound(note) {
            const audio = new Audio(`sounds/${note}.mp3`);

            audio.play().catch(error => {
                console.error(`Error playing sound for note ${note}:`, error);
                alert(`Sound for ${note} not found.`);
            });
        }

        // Function to highlight keys
        function highlightKey(key) {
            key.classList.add('active');
        }

        // Function to unhighlight keys
        function unhighlightKey(key) {
            key.classList.remove('active');
        }

        // Function to handle key interactions
        function handleKeyPress(key) {
            const note = key.getAttribute('data-note');
            playSound(note);
            highlightKey(key);
        }

        // Setup mouse and touch events
        keys.forEach(key => {
            // Mouse events
            key.addEventListener('mousedown', () => handleKeyPress(key));
            key.addEventListener('mouseup', () => unhighlightKey(key));
            key.addEventListener('mouseleave', () => unhighlightKey(key));
            
            // Touch events for mobile support
            key.addEventListener('touchstart', () => handleKeyPress(key));
            key.addEventListener('touchend', () => unhighlightKey(key));
        });

        // Keyboard support
        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'a': handleKeyPress(keys[0]); break; // C
                case 'w': handleKeyPress(keys[1]); break; // C#
                case 's': handleKeyPress(keys[2]); break; // D
                case 'e': handleKeyPress(keys[3]); break; // D#
                case 'd': handleKeyPress(keys[4]); break; // E
                case 'f': handleKeyPress(keys[5]); break; // F
                case 't': handleKeyPress(keys[6]); break; // F#
                case 'g': handleKeyPress(keys[7]); break; // G
                case 'y': handleKeyPress(keys[8]); break; // G#
                case 'h': handleKeyPress(keys[9]); break; // A
                case 'u': handleKeyPress(keys[10]); break; // A#
                case 'j': handleKeyPress(keys[11]); break; // B
                case 'k': handleKeyPress(keys[12]); break; // C2
                default: return; // Quit when this doesn't handle the key event.
            }
            event.preventDefault();
        });

        // Remove highlight on keyup
        document.addEventListener('keyup', () => {
            keys.forEach(unhighlightKey);
        });
    </script>
</body>
</html>
